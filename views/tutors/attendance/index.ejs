<div class="jumbotron" style="background-color:#d9edf7">
  <div class="container">
    <div class="row">
      <div class="col-sm-6 offset-sm-3">
        <h2 class="display-4">tutors</h2><br>
        <hr class="my-4">
        <p>indicated future attendance</p>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <% var uniqueDates = [...new Set(allTutors.map(function (tutor) { %>
      <% return tutor.attendance.map(function (indivAtten) { %>
        <% return indivAtten.date %>
      <% }) %>
    <% }).reduce(function (a, b) { %>
      <% return a.concat(b) %>
    <% }, []).filter(function (item, ind, arr) { %>
      <% return item.date > Date.now() - 64 * 60 * 60 * 1000 && (arr.includes(null) && arr.includes(undefined) ? item !== null : true) %>
    <% }))] %>
    <% if (uniqueDates.length > 0) { %>
      <div class="col-sm-8 offset-sm-2">
        <div class="d-flex flex-wrap justify-content-left mb-4">
          <% uniqueDates.forEach(function (uniqueDate) { %>
            <div class="card m-2" style="width: 21rem;">
              <div class="card-header">
                <a href="/history/<%= uniqueDate.id %>"><%= formatDateShort(uniqueDate.date) %></a>
              </div>
              <div class="card-block">
                <div class="list-group">
                <% var thisDateTutors = allTutors.filter(function (tutor) { %>
                  <% return tutor.attendance.some(function (indivAtten) { %>
                    <% return indivAtten.date === uniqueDate && indivAtten.attending === true %>
                  <% }) %>
                <% }) %>
                <% thisDateTutors.forEach(function (thisDateTutor) { %>
                  <a class="list-group-item list-group-item-action justify-content-between" href="/tutors/attendance/<%= thisDateTutor.id %>">
                    <span class="d-inline-block text-truncate">
                      <%= thisDateTutor.name %>
                    </span>
                  </a>
                <% }) %>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
    <% } else { %>
      <div class="col-sm-6 offset-sm-3">
        <p>No future tutor attendance information yet. Make sure that future sessions have been <a href="/history" target="_blank">added</a>, and that each tutor has <a href="/tutors/attendance/<%= currentUser.id %>" target="_blank">updated</a> their future attendance information</p>
      </div>
    <% } %>
  </div>
</div>
